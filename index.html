<!DOCTYPE html>
<html>
<head>
    <title>Order System</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #stats { margin-top: 20px; padding: 15px; background: #f0f0f0; }
        .progress { height: 20px; background: #ddd; margin: 5px 0; }
        .progress-bar { height: 100%; background: #4CAF50; }
    </style>
</head>
<body>
<h1>Order System Client</h1>
<div>
    <label for="n">Requests (N):</label>
    <input type="number" id="n" value="100" min="1">
    <button id="run">Run Beta</button>
</div>
<div id="stats">
    <h3>Last 100 Orders Stats</h3>
    <div id="time-info"></div>
    <div id="categories"></div>
</div>

<script>
    $(document).ready(function() {
        // Автообновление статистики
        function updateStats() {
            $.get('gamma.php', function(data) {
                $('#time-info').html(`
                        <p>Period: ${data.time_data.first_order} to ${data.time_data.last_order}</p>
                        <p>Duration: ${Math.round(data.time_data.interval_seconds)} seconds</p>
                    `);

                let html = '';
                data.categories.forEach(cat => {
                    html += `
                            <div>
                                <strong>${cat.name}</strong>:
                                ${cat.orders_count} orders (${cat.items_sold} items)
                                <div class="progress">
                                    <div class="progress-bar" style="width: ${cat.items_sold}%"></div>
                                </div>
                            </div>
                        `;
                });
                $('#categories').html(html);
            });
        }

        setInterval(updateStats, 1000);

        // Запуск Beta
        $('#run').click(function() {
            const n = $('#n').val();
            $.get('beta.php', { n: n }, function(res) {
                alert(res.message);
            });
        });
    });
</script>
</body>
</html>